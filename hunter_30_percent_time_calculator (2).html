<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hunter 30% Time Calculator</title>
  <style>
    /* Monster Hunter Now-inspired theme (forest/stone/gold) */
    :root {
      --bg: #0b1113;          /* deep forest */
      --panel: #101719;       /* dark slate */
      --panel-2: #0e1517;
      --text: #e7f1ee;        /* near white */
      --muted: #95aba4;       /* moss gray */
      --accent: #2fd4a7;      /* mint/teal */
      --accent-2: #89f0c9;
      --gold: #d2b674;
      --danger: #ff5a5a;
      --ok: #80f4b4;
      --shadow: rgba(0,0,0,0.35);
    }
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial;
      background:
        radial-gradient(1200px 800px at 15% -10%, #142225 0%, var(--bg) 50%) no-repeat,
        linear-gradient(180deg, #0b1113, #0b1113);
      color: var(--text);
      display: grid;
      place-items: start center;
      padding: 28px 14px 48px;
    }
    .container {
      width: 100%;
      max-width: 840px;
      display: grid;
      gap: 18px;
    }
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 18px;
      padding: 18px;
      box-shadow: 0 10px 30px var(--shadow);
      backdrop-filter: blur(6px);
    }
    header h1 {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: clamp(22px, 3.2vw, 30px);
      margin: 0 0 6px;
      letter-spacing: .3px;
      text-shadow: 0 2px 10px rgba(0,0,0,.4);
    }
    .desc { margin: 0; color: var(--muted); }
    .badge {
      display:inline-flex; align-items:center; gap:6px;
      font-size:12px; padding:4px 8px; border-radius:999px;
      background: rgba(47,212,167,.12); border:1px solid rgba(47,212,167,.35);
      color:#b6ffe5;
    }
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    .grid > * { min-width: 0; } /* prevent overflow/overlap */
    @media (max-width: 700px) {
      .grid { grid-template-columns: 1fr; }
    }
    label { display: block; font-weight: 700; margin-bottom: 6px; letter-spacing:.2px; color:#dff5ee; }
    .field { display: grid; gap: 6px; }
    .input-group { display:flex; align-items:center; gap:8px; }
    .stepper {
      display:inline-flex; align-items:center; gap:0;
      border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.12);
      background: var(--panel);
    }
    .stepper button {
      width:42px; height:44px; border:0; background:transparent; color:var(--text);
      font-weight:800; font-size:18px; cursor:pointer;
    }
    .stepper button:active { background: rgba(255,255,255,0.06); }
    .stepper input {
      width:160px; height:44px; border:0; padding:0 12px;
      background: transparent; color: var(--text); outline:none; text-align:center;
      -moz-appearance: textfield;
    }
    /* Hide number input arrows (Chrome/Safari/Edge/Opera) */
    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    /* Hide number input arrows (Firefox) */
    input[type=number] {
      -moz-appearance: textfield;
    }
    select {
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.12);
      background: var(--panel);
      color: var(--text);
      outline: none;
      transition: border-color .15s ease, box-shadow .15s ease;
    }
    .help { font-size: 12px; color: var(--muted); }
    .error { font-size: 12px; color: var(--danger); min-height: 16px; }
    .row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
    .results {
      display: grid;
      gap: 8px;
      font-size: 15px;
    }
    .result-line {
      display: flex;
      justify-content: space-between;
      gap: 16px;
      border-bottom: 1px dashed rgba(255,255,255,0.08);
      padding: 8px 0;
    }
    .result-line .label { color: var(--muted); }
    .note { color: var(--muted); font-size: 13px; line-height: 1.5; }
    .already { color: var(--ok); font-weight: 700; }
    .footer { text-align: center; color: var(--muted); font-size: 12px; }
    .icon { width: 26px; height: 26px; }
  </style>
</head>
<body>
  <main class="container">
    <section class="card">
      <header>
        <h1>
          <!-- Inline SVG 'paw/claw' icon -->
          <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M6 9c1.66 0 3-1.79 3-4S7.66 1 6 1 3 2.79 3 5s1.34 4 3 4Zm12 0c1.66 0 3-1.79 3-4s-1.34-4-3-4-3 1.79-3 4 1.34 4 3 4Zm-6 3c2.76 0 5-2.68 5-6S14.76 0 12 0 7 2.68 7 6s2.24 6 5 6Zm6.5 2.5c-2-1.2-4.2-1.5-6.5-1.5s-4.5.3-6.5 1.5C4.2 15.7 3 17.6 3 19.7 3 22 5.2 24 7.9 24h8.2c2.7 0 4.9-2 4.9-4.3 0-2.1-1.2-4-3.4-5.2Z" fill="#d2b674" opacity=".9"/>
          </svg>
          Hunter 30% Time Calculator
          <span class="badge" title="Rate formula">Rate = V/60 − 1/18</span>
        </h1>
      </header>
      <p class="desc">Minutes needed to reach <strong>30% of total value (V)</strong> from your current value (C). Start floor is 1.</p>
    </section>

    <section class="card" aria-labelledby="formTitle">
      <h2 id="formTitle" style="margin:0 0 8px;font-size:18px;">Inputs</h2>
      <div class="grid">
        <div class="field">
          <label for="totalV">Total Value (V)</label>
          <div class="input-group">
            <div class="stepper">
              <button type="button" data-step="-1" data-for="totalV">−</button>
              <input id="totalV" type="number" inputmode="decimal" min="1" step="1" value="100" aria-describedby="vHelp vErr" />
              <button type="button" data-step="1" data-for="totalV">+</button>
            </div>
          </div>
          <div id="vHelp" class="help">V ≥ 1</div>
          <div id="vErr" class="error" role="alert" aria-live="polite"></div>
        </div>
        <div class="field">
          <label for="currentC">Current Value (C)</label>
          <div class="input-group">
            <div class="stepper">
              <button type="button" data-step="-1" data-for="currentC">−</button>
              <input id="currentC" type="number" inputmode="decimal" min="1" step="1" value="1" aria-describedby="cHelp cErr" />
              <button type="button" data-step="1" data-for="currentC">+</button>
            </div>
          </div>
          <div id="cHelp" class="help">C ≥ 1 and C ≤ V</div>
          <div id="cErr" class="error" role="alert" aria-live="polite"></div>
        </div>
      </div>

      <div class="row" style="margin-top:12px;">
        <label class="switch">
          <input id="toggleTests" type="checkbox" aria-controls="testsWrap" />
          <span>Show test cases</span>
        </label>
      </div>

      <div id="testsWrap" class="row" style="margin-top:8px; display:none;">
        <label for="presets" class="help">Test cases:</label>
        <select id="presets" aria-label="Test cases" style="min-width:260px;">
          <option value="">Choose…</option>
          <option value='{"V":100,"C":1}'>V=100, C=1 → T=18.00</option>
          <option value='{"V":107,"C":20}'>V=107, C=20 → ≈7.00 min</option>
          <option value='{"V":200,"C":60}'>V=200, C=60 → sample</option>
          <option value='{"V":150,"C":10}'>V=150, C=10 → sample</option>
        </select>
      </div>
    </section>

    <section class="card" aria-labelledby="resultsTitle">
      <h2 id="resultsTitle" style="margin:0 0 8px;font-size:18px;">Results</h2>
      <div class="results" id="results" aria-live="polite">
        <div class="result-line"><span class="label">Minutes needed (T)</span><strong id="tMinutes">—</strong></div>
        <div class="result-line"><span class="label">As hh:mm:ss</span><strong id="tHMS">—</strong></div>
        <div class="result-line"><span class="label">Target (30% of V)</span><strong id="target">—</strong></div>
        <div class="result-line"><span class="label">Rate per minute</span><strong id="rate">—</strong></div>
        <div class="result-line"><span class="label">Status</span><strong id="status">—</strong></div>
      </div>
      <p class="note" style="margin-top:10px;">
        Formula: <code>rate(V) = V/60 − 1/18</code>, <code>C_eff = max(C, 1)</code>, <code>t = max(0, (0.3V − C_eff) / rate(V))</code>.<br/>
        If C ≥ 0.3V → t = 0. If rate ≤ 0 → t = 0.
      </p>
    </section>

    <p class="footer">This page works offline. Save as <code>index.html</code> and open in your browser.</p>
  </main>

  <script>
    (function() {
      const $ = (sel) => document.querySelector(sel);
      const vInput = $('#totalV');
      const cInput = $('#currentC');
      const vErr = $('#vErr');
      const cErr = $('#cErr');
      const presets = $('#presets');
      const testsWrap = $('#testsWrap');
      const toggleTests = $('#toggleTests');

      const outMin = $('#tMinutes');
      const outHMS = $('#tHMS');
      const outTarget = $('#target');
      const outRate = $('#rate');
      const outStatus = $('#status');

      const nf = new Intl.NumberFormat(undefined, { maximumFractionDigits: 2 });
      const nf4 = new Intl.NumberFormat(undefined, { maximumFractionDigits: 4 });

      function target(V){ return 0.3 * V; }
      function ratePerMin(V){ return V/60 - 1/18; } // adjusted with start-at-1 model
      function minutesToThirty(V, C){
        if (!(V >= 1)) return NaN;
        const Ceff = Math.max(1, C);
        const tgt = target(V);
        if (Ceff >= tgt) return 0;
        const r = ratePerMin(V);
        if (!(r > 0)) return 0;
        return (tgt - Ceff) / r;
      }
      function toHMS(minutes) {
        if (!isFinite(minutes)) return '—';
        const totalSec = Math.max(0, Math.round(minutes * 60));
        const h = Math.floor(totalSec / 3600);
        const m = Math.floor((totalSec % 3600) / 60);
        const s = totalSec % 60;
        const pad = (x) => String(x).padStart(2, '0');
        return `${pad(h)}:${pad(m)}:${pad(s)}`;
      }
      function validate(V, C){
        let ok = true;
        vErr.textContent = ''; cErr.textContent = '';
        if (!(V >= 1)) { vErr.textContent = 'V must be ≥ 1.'; ok = false; }
        if (C == null || isNaN(C)) { cErr.textContent = 'C is required.'; ok = false; }
        else if (C < 1) { cErr.textContent = 'C must be ≥ 1.'; ok = false; }
        else if (V >= 1 && C > V) { cErr.textContent = 'C cannot exceed V.'; ok = false; }
        return ok;
      }
      function render(V, C){
        const valid = validate(V, C);
        if (!valid){
          outMin.textContent = '—';
          outHMS.textContent = '—';
          outTarget.textContent = '—';
          outRate.textContent = '—';
          outStatus.textContent = '—';
          return;
        }
        const Ceff = Math.max(1, C);
        const tgt = target(V);
        const r = ratePerMin(V);
        const t = minutesToThirty(V, C);
        const atOrAbove = Ceff >= tgt;

        outTarget.textContent = nf.format(tgt);
        outRate.textContent = nf4.format(r);
        outMin.textContent = nf.format(Math.max(0, t));
        outHMS.textContent = toHMS(Math.max(0, t));
        outStatus.textContent = atOrAbove ? 'Already at or above 30%' : 'Below 30%';
        outStatus.className = atOrAbove ? 'already' : '';
      }
      function readNumbers(){
        const V = parseFloat(vInput.value);
        const C = parseFloat(cInput.value);
        return { V, C };
      }
      // Live calc on input and change
      ['input','change'].forEach(evt => {
        vInput.addEventListener(evt, () => { const {V,C}=readNumbers(); render(V,C); });
        cInput.addEventListener(evt, () => { const {V,C}=readNumbers(); render(V,C); });
      });
      // Stepper buttons
      document.querySelectorAll('.stepper button').forEach(btn => {
        btn.addEventListener('click', () => {
          const targetId = btn.getAttribute('data-for');
          const step = parseFloat(btn.getAttribute('data-step'));
          const input = document.getElementById(targetId);
          const current = parseFloat(input.value || (targetId==='currentC'?1:1));
          let next = (current || 0) + step;
          if (targetId === 'totalV') next = Math.max(1, Math.round(next));
          if (targetId === 'currentC') {
            const V = parseFloat(vInput.value || 1);
            next = Math.min(Math.max(1, Math.round(next)), Math.max(1, V));
          }
          input.value = next;
          const {V, C} = readNumbers();
          render(V, C);
        });
      });
      // Presets show/hide
      function syncTestsVisibility(){ testsWrap.style.display = toggleTests.checked ? 'flex' : 'none'; }
      toggleTests.addEventListener('change', syncTestsVisibility);
      toggleTests.checked = false; syncTestsVisibility();
      // Presets autofill
      if (presets) {
        presets.addEventListener('change', () => {
          const val = presets.value;
          if (!val) return;
          try {
            const obj = JSON.parse(val);
            vInput.value = obj.V;
            cInput.value = obj.C;
            render(obj.V, obj.C);
          } catch(_) {}
        });
      }
      // Initial compute (V=100, C=1)
      render(100, 1);
    })();
  </script>
</body>
</html>